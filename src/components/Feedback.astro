---
import { getLangFromUrl, useTranslations } from '../i18n/utils.js';
import Star from './icons/Star.astro';

const feedback = [
    {
        name:'El peruano1',
        text:'Lorem ipsum is placeholder text commonly used in the graphic, print, and publishing industries for previewing layouts and visual mockups.',
        star:5
    },
    {
        name:'El peruano2',
        text:'  Lorem ipsum is placeholder text commonly used in the graphic, print, and publishing industries for previewing layouts and visual mockups.',
        star:3
    },
    {
        name:'El peruano3',
        text:'  Lorem ipsum is placeholder text commonly used in the graphic, print, and publishing industries for previewing layouts and visual mockups.',
        star:5
    },
    {
        name:'El peruano4',
        text:'  Lorem ipsum is placeholder text commonly used in the graphic, print, and publishing industries for previewing layouts and visual mockups.',
        star:4
    },

    {
        name:'El peruano5',
        text:'  Lorem ipsum is placeholder text commonly used in the graphic, print, and publishing industries for previewing layouts and visual mockups.',
        star:4.5
    },
    {
        name:'El peruano5',
        text:'  Lorem ipsum is placeholder text commonly used in the graphic, print, and publishing industries for previewing layouts and visual mockups.',
        star:4.5
    },
]

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const feedBack = t('feedback');
---
<section class="max-w-7xl mx-auto px-6 py-24" id="feedback">

  <div class="text-center mb-16">
    <h2 class="text-4xl md:text-5xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-emerald-500 to-teal-600 mb-6
      leading-relaxed tracking-tightest font-kerning-auto letter-spacing-wide pb-1">
      {feedBack.h2}
    </h2>
    <div class="w-24 h-1.5 mx-auto bg-gradient-to-r from-emerald-400 to-teal-500 rounded-full mb-6"></div>
    <p class="mt-4 sm:mt-7 text-gray-700 max-w-2xl mx-auto text-base sm:text-lg px-3 sm:px-0 font-semibold">
      {feedBack.p}
    </p>
  </div>  


  <div class="swiper h-[320px] px-2" id="feedback-slider">
    <div class="swiper-wrapper flex items-center">
      {feedback.map((feed, index) => (
        <div class={`swiper-slide h-64 flex flex-col justify-between bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-6 border border-gray-200/50 dark:border-gray-700/50 transition-all duration-300 hover:shadow-md ${index === 0 ? 'ml-0' : ''}`}>
          <div>
            <h4 class="text-xl font-semibold text-gray-900 dark:text-white mb-2">{feed.name}</h4>
            <p class="text-gray-600 dark:text-gray-300 leading-relaxed italic">"{feed.text}"</p>
          </div>
          <div class="flex items-center gap-x-2 mt-4">
            <div class="flex">
              <Star class="w-5 stroke-emerald-800 dark:stroke-emerald-900 fill-emerald-500"/>
              <Star class="w-5 stroke-emerald-800 dark:stroke-emerald-900 fill-emerald-500"/>
              <Star class="w-5 stroke-emerald-800 dark:stroke-emerald-900 fill-emerald-500"/>
              <Star class="w-5 stroke-emerald-800 dark:stroke-emerald-900 fill-emerald-500"/>
              <Star class="w-5 stroke-emerald-800 dark:stroke-emerald-900 fill-emerald-500"/>
            </div>
            <strong class="text-emerald-600 dark:text-emerald-400">5.0</strong>
          </div>
        </div>
      ))}
    </div>


    <div class="swiper-button-prev text-emerald-500 hover:text-emerald-600 dark:hover:text-emerald-400"></div>
    <div class="swiper-button-next text-emerald-500 hover:text-emerald-600 dark:hover:text-emerald-400"></div>
  </div>

  <div class="text-center mt-16">
    <a href="#contact" class="inline-block bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 text-white font-medium py-3 px-8 rounded-full transition-all duration-300 shadow-md hover:shadow-lg">
      Déjenos su opinión
    </a>
  </div>
</section>

<script>
// @ts-ignore
import Swiper from 'https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.mjs'

function initSwiper() {
  new Swiper('#feedback-slider', {
    slidesPerView: 1,
    spaceBetween: 20,
    centeredSlides: false, 
    initialSlide: 0, 
    grabCursor: true,
    navigation: {
      nextEl: '.swiper-button-next',
      prevEl: '.swiper-button-prev',
    },
    breakpoints: {
      640: {
        slidesPerView: 2,
        spaceBetween: 25,
        centeredSlides: false
      },
      1024: {
        slidesPerView: 3,
        spaceBetween: 30,
        centeredSlides: false
      }
    }
  });
}

document.addEventListener("astro:page-load", initSwiper);
</script>